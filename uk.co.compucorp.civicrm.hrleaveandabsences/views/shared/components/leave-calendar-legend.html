<section class="panel panel-default" ng-class="{ 'is-collapsed': legend.legendCollapsed }">
  <header class="panel-heading panel-heading-plain">
    <h2 class="panel-title chr_leave-calendar__legend__title" role="button" ng-click="legend.legendCollapsed = !legend.legendCollapsed">
      <i class="fa"
        aria-hidden="true"
        ng-class="{ 'fa-chevron-right': legend.legendCollapsed, ' fa-chevron-down': !legend.legendCollapsed }"></i>
      Legend
    </h2>
  </header>
  <div class="panel-collapse" uib-collapse="legend.legendCollapsed">
    <div class="panel-body chr_leave-calendar__legend" ng-show="!legend.legendCollapsed">
      <div class="chr_leave-calendar__legend__header">Types</div>
      <div class="clearfix">
        <div ng-repeat="absenceType in legend.absenceTypes | filter:legend.checkIfAbsenceTypeIdIsDefined"
          ng-click="legend.toggleFilteringByAbsenceType(absenceType.id)"
          ng-class="{
            'chr_leave-calendar__legend__type-badge-not-selected':
              !legend.checkIfAbsenceTypeIsSelectedForFiltering(absenceType.id),
            'chr_leave-calendar__legend__type-badge-selected':
              legend.checkIfAbsenceTypeIsSelectedForFiltering(absenceType.id) && legend.absenceTypesToFilterBy.length}"
          class="chr_leave-calendar__legend__type-badge pointer
            chr_leave-calendar__legend__type-badge-clickable"
          ng-style="legend.getAbsenceTypeStyle(absenceType)">
          {{absenceType.title}}
        </div>
        <div class="chr_leave-calendar__legend__type-badge pointer
            chr_leave-calendar__legend__reset-absence-types-filter"
          ng-if="legend.absenceTypesToFilterBy.length"
          ng-click="legend.resetFilteringByAbsenceTypes()">
          <big><i class="fa fa-times"></i></big>
          Display All
        </div>
      </div>
      <div class="clearfix">
        <div ng-repeat="nonWorkingDayType in legend.nonWorkingDayTypes"
          class="chr_leave-calendar__legend__type-badge
            chr_leave-calendar__legend__type-badge-{{nonWorkingDayType.cssClassSuffix}}">
          {{nonWorkingDayType.label}}
        </div>
        <div class="chr_leave-calendar__legend__type-badge
          chr_leave-calendar__legend__type-badge-generic-leave">
          Leave
        </div>
      </div>
      <div class="chr_leave-calendar__legend__header">Other</div>
      <div class="clearfix">
        <div ng-repeat="otherBadge in legend.otherBadges"
          class="chr_leave-calendar__legend__other-badge-wrapper">
          <div class="chr_leave-calendar__legend__other-badge
            {{otherBadge.cssClassSuffix ? 'chr_leave-calendar__legend__other-badge-' + otherBadge.cssClassSuffix : ''}}">
            {{otherBadge.label}}</div>
          {{otherBadge.description}}
        </div>
      </div>
    </div>
  </div>
</section>
